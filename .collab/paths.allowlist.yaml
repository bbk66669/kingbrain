# /.collab/paths.allowlist.yaml
# --------------------------------------------
# 只允许 AI 写入 / 修改以下路径；其他路径视为只读
allow:
  - "/apps/**"
  - "/services/**"
  - "/scripts/**"
  - "/ml/**"
  - "/observability/**"
  - "/orchestrator/**"
  - "/strategy/ci/**"
  - "/.collab/**"
  - "/docs/**"
  - "/tools/**"                 # 新增：顶层 tools 允许（供 Claude 使用）
  - "/.collab/bootstrap-tools/**"  # 新增：只允许 bootstrap-tools（供 Claude 使用）

deny:
  - "/.git/**"
  - "/configs/registry/**"        # 受控
  - "/preference/models/**"       # 需双签
  - "/security/**"                # 准入策略
  - "/terraform/**"
  # 明确禁止当前阶段触碰的协作区（即使 /.collab/** 被允许，这里也会覆盖禁止）
  - "/.collab/tools/**"           # 保留给后续真实 AI 协作，现阶段禁止
  - "/.collab/kb-validate/**"     # 同上，禁止改动
# 若后续需屏蔽生成物，可再追加：
# deny:
#   - "/k8s/manifests/generated/**"

# 只读目录（AI 可读不可写）——仅用于标注；实际生效以 allow/deny/writable 为准
readonly:
  - "/k8s/manifests/**/*.yaml"      # 所有 YAML 可读不可写
  - "/docs/kingbrain/**"            # 顶层只读，但具体可写子目录见 writable
  - "/grafana/dashboards/**/*.json"

# 可写目录（AI 阶段性写入＆修改）——允许写入需同时命中 allow 与 writable；deny 仍优先生效
writable:
  # 顶层工具（Claude 应改这里，而非 .collab/tools）
  - "/tools/**"
  - "/.collab/bootstrap-tools/**"

  # 项目产物路径（FAKE/REAL 同构）
  - "/docs/kingbrain/ACK/**"
  - "/docs/kingbrain/PLAN/**"
  - "/docs/kingbrain/BORROW/**"
  - "/docs/kingbrain/DIFF/**"
  - "/.collab/CR/**"
  - "/reports/**"
# --------------------------------------------

